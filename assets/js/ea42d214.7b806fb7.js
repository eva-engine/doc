"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[20139],{3905:function(e,n,t){t.d(n,{Zo:function(){return c},kt:function(){return m}});var r=t(67294);function i(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function a(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function s(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?a(Object(t),!0).forEach((function(n){i(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):a(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function o(e,n){if(null==e)return{};var t,r,i=function(e,n){if(null==e)return{};var t,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)t=a[r],n.indexOf(t)>=0||(i[t]=e[t]);return i}(e,n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)t=a[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(i[t]=e[t])}return i}var l=r.createContext({}),p=function(e){var n=r.useContext(l),t=n;return e&&(t="function"==typeof e?e(n):s(s({},n),e)),t},c=function(e){var n=p(e.components);return r.createElement(l.Provider,{value:n},e.children)},u={inlineCode:"code",wrapper:function(e){var n=e.children;return r.createElement(r.Fragment,{},n)}},d=r.forwardRef((function(e,n){var t=e.components,i=e.mdxType,a=e.originalType,l=e.parentName,c=o(e,["components","mdxType","originalType","parentName"]),d=p(t),m=i,g=d["".concat(l,".").concat(m)]||d[m]||u[m]||a;return t?r.createElement(g,s(s({ref:n},c),{},{components:t})):r.createElement(g,s({ref:n},c))}));function m(e,n){var t=arguments,i=n&&n.mdxType;if("string"==typeof e||i){var a=t.length,s=new Array(a);s[0]=d;var o={};for(var l in n)hasOwnProperty.call(n,l)&&(o[l]=n[l]);o.originalType=e,o.mdxType="string"==typeof e?e:i,s[1]=o;for(var p=2;p<a;p++)s[p]=t[p];return r.createElement.apply(null,s)}return r.createElement.apply(null,t)}d.displayName="MDXCreateElement"},64720:function(e,n,t){t.r(n),t.d(n,{frontMatter:function(){return o},contentTitle:function(){return l},metadata:function(){return p},toc:function(){return c},default:function(){return d}});var r=t(87462),i=t(63366),a=(t(67294),t(3905)),s=["components"],o={},l="Development based on CDN",p={unversionedId:"tutorials/cdnIntro",id:"tutorials/cdnIntro",isDocsHomePage:!1,title:"Development based on CDN",description:"Based on CDN development, we recommend using start-demo-with-cdn, this scaffolding uses the Externals capabilities of Webpack, and Eva. The js package is introduced by way of CDN.",source:"@site/docs/tutorials/cdnIntro.md",sourceDirName:"tutorials",slug:"/tutorials/cdnIntro",permalink:"/docs/tutorials/cdnIntro",editUrl:"https://github.com/eva-engine/eva-engine.github.io/tree/master/docs/tutorials/cdnIntro.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Plug-in development",permalink:"/docs/tutorials/pluginDevelop"}},c=[{value:"Introduce",id:"introduce",children:[],level:2},{value:"Use of plugins",id:"use-of-plugins",children:[],level:2},{value:"Render",id:"render",children:[],level:2},{value:"Encoding",id:"encoding",children:[],level:2},{value:"rule",id:"rule",children:[],level:2},{value:"Conversion method",id:"conversion-method",children:[],level:2}],u={toc:c};function d(e){var n=e.components,t=(0,i.Z)(e,s);return(0,a.kt)("wrapper",(0,r.Z)({},u,t,{components:n,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"development-based-on-cdn"},"Development based on CDN"),(0,a.kt)("p",null,"Based on CDN development, we recommend using ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/eva-engine/start-demo-with-cdn"},"start-demo-with-cdn"),", this scaffolding uses the Externals capabilities of Webpack, and Eva. The js package is introduced by way of CDN."),(0,a.kt)("h2",{id:"introduce"},"Introduce"),(0,a.kt)("p",null,"If you want to import Eva.js in the form of CDN, you can use unpkg/jsdelivr to import it."),(0,a.kt)("p",null,"The following is the introduction plan of @eva/eva.js"),(0,a.kt)("p",null,"unpkg:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-html"},'<script src="https://unpkg.com/browse/@eva/eva.js@1.x/dist/EVA.min.js"><\/script>\n')),(0,a.kt)("p",null,"jsdelivr:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-html"},'<script src="https://cdn.jsdelivr.net/npm/@eva/eva.js@1.x/dist/EVA.min.js"><\/script>\n')),(0,a.kt)("p",null,"A compressed version and a debug version are provided in the dist directory. Remove the .min and use the debug version"),(0,a.kt)("p",null,"unpkg:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-html"},'<script src="https://unpkg.com/browse/@eva/eva.js@1.x/dist/EVA.js"><\/script>\n')),(0,a.kt)("p",null,"jsdelivr:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-html"},'<script src="https://cdn.jsdelivr.net/npm/@eva/eva.js@1.x/dist/EVA.js"><\/script>\n')),(0,a.kt)("p",null,"If you need to introduce different versions of Eva.js, please go to ",(0,a.kt)("a",{parentName:"p",href:"https://unpkg.com/"},"unpkg official website")," / ",(0,a.kt)("a",{parentName:"p",href:"https://www.jsdelivr.com/"},"jsdelivr official website")," to view the plan for details"),(0,a.kt)("h2",{id:"use-of-plugins"},"Use of plugins"),(0,a.kt)("p",null,"Each plug-in of Eva.js is an npm package, so each plug-in needs to introduce a cdn file"),(0,a.kt)("p",null,"For example: image plugin"),(0,a.kt)("p",null,"unpkg:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-html"},'<script src="https://cdn.jsdelivr.net/npm/@eva/plugin-renderer-img@1.x/dist/EVA.plugin.renderer.img.js"><\/script>\n')),(0,a.kt)("p",null,"jsdelivr:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-html"},'<script src="https://cdn.jsdelivr.net/npm/@eva/plugin-renderer-img@1.x/dist/EVA.plugin.renderer.img.js"><\/script>\n')),(0,a.kt)("h2",{id:"render"},"Render"),(0,a.kt)("p",null,"The rendering of Eva.js v1.x version is provided by PixiJS, so you need to introduce PixiJS cdn first.\nCurrently using the version of pixi4.x"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-html"},'<script src="https://unpkg.com/pixi.js@4.8.9/dist/pixi.min.js"><\/script>\n')),(0,a.kt)("p",null,"The rendering of Eva.js v1.x requires a layer of adapter support, so it also needs to introduce renderer-adapter"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-html"},'<script src="//unpkg.com/@eva/renderer-adapter@1.1.x/dist/EVA.rendererAdapter.min.js"><\/script>\n')),(0,a.kt)("p",null,"So the cdn files needed to render a complete picture are:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-html"},'<canvas id="canvas" style="width: 100%;height: auto"></canvas>\n\n<script src="https://unpkg.com/@eva/eva.js@1.x/dist/EVA.min.js"><\/script>\n<script src="https://unpkg.com/pixi.js@4.8.9/dist/pixi.min.js"><\/script>\n<script src="https://unpkg.com/@eva/renderer-adapter@1.x/dist/EVA.rendererAdapter.min.js"><\/script>\n<script src="https://unpkg.com/@eva/plugin-renderer@1.x/dist/EVA.plugin.renderer.min.js"><\/script>\n<script src="https://unpkg.com/@eva/plugin-renderer-img@1.x/dist/EVA.plugin.renderer.img.min.js"><\/script></head>\n')),(0,a.kt)("h2",{id:"encoding"},"Encoding"),(0,a.kt)("p",null,"When developing with CDN, we hung the variables and classes of Eva.js on the window.\nLet\u2019s take a simple example. Let\u2019s assume that the CDN files needed for the image have been introduced."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"const {Game, GameObject, resource, RESOURCE_TYPE} = EVA;\nconst {RendererSystem} = EVA.plugin.renderer;\nconst {Img, ImgSystem} = EVA.plugin.renderer.img;\nresource.addResource([\n  {\n    name:'imageName',\n    type: RESOURCE_TYPE.IMAGE,\n    src: {\n      image: {\n        type:'png',\n        url:\n          'https:////gw.alicdn.com/bao/uploaded/TB1lVHuaET1gK0jSZFhXXaAtVXa-200-200.png',\n      },\n    },\n    preload: true,\n  },\n]);\n\nconst game = new Game({\n  systems: [\n    new RendererSystem({\n      canvas: document.querySelector('#canvas'),\n      width: 750,\n      height: 1000,\n    }),\n    new ImgSystem(),\n  ],\n});\n\nconst image = new GameObject('image', {\n  size: {width: 300, height: 300 },\n  origin: {x: 0, y: 0 },\n  position: {\n    x: 100,\n    y: 100,\n  }\n});\n\nimage.addComponent(\n  new Img({\n    resource:'imageName',\n  }),\n);\n\ngame.scene.addChild(image);\n")),(0,a.kt)("h2",{id:"rule"},"rule"),(0,a.kt)("p",null,"We can find that the rules for variable mounting are similar to those for npm package names, where @eva/eva.js corresponds to EVA\nThe rest of the plugins are also mounted on the EVA variable"),(0,a.kt)("p",null,"For example:"),(0,a.kt)("p",null,"@eva/plugin-transition -> EVA.plugin.transition"),(0,a.kt)("p",null,"@eva/plugin-renderer -> EVA.plugin.renderer"),(0,a.kt)("p",null,"@eva/plugin-renderer-img -> EVA.plugin.renderer.img"),(0,a.kt)("p",null,"@eva/plugin-renderer-sprite -> EVA.plugin.renderer.sprite"),(0,a.kt)("p",null,"As we can see, in fact, ",(0,a.kt)("inlineCode",{parentName:"p"},"-")," has become ",(0,a.kt)("inlineCode",{parentName:"p"},".")),(0,a.kt)("p",null,"There are hyphens in the component name, such as ",(0,a.kt)("inlineCode",{parentName:"p"},"nine-patch")," / ",(0,a.kt)("inlineCode",{parentName:"p"},"sprite-animation")," / ",(0,a.kt)("inlineCode",{parentName:"p"},"tiling-sprite")," We write the component name in camel case"),(0,a.kt)("p",null,"@eva/plugin-renderer-nine-patch -> EVA.plugin.renderer.ninePatch"),(0,a.kt)("p",null,"@eva/plugin-renderer-sprite-animation -> EVA.plugin.renderer.spriteAnimation"),(0,a.kt)("p",null,"@eva/plugin-renderer-tiling-sprite -> EVA.plugin.renderer.tilingSprite"),(0,a.kt)("p",null,"EvaX components are the most special"),(0,a.kt)("p",null,"@eva/plugin-evax -> EVA.plugin.EVAX"),(0,a.kt)("h2",{id:"conversion-method"},"Conversion method"),(0,a.kt)("p",null,"Can be converted by the following methods"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"function transform(pkgName) {\n  if (pkgName ==='@eva/eva.js') {\n      return'EVA';\n  } else if (pkgName ==='@eva/plugin-evax') {\n      return'EVA.plugin.EVAX'\n  } else if (pkgName.indexOf('@eva/plugin') === 0) {\n      let name = pkgName.substring(12);\n      name = name.replace('-','.')\n      const [a, b] = name.split('-')\n      if (b) {\n        name = a+b[0].toUpperCase()+b.substring(1)\n      }\n      return `EVA.plugin.${name}`;\n  }\n}\n\nconsole.log(transform('@eva/eva.js'))\nconsole.log(transform('@eva/plugin-transition'))\nconsole.log(transform('@eva/plugin-renderer'))\nconsole.log(transform('@eva/plugin-renderer-img'))\nconsole.log(transform('@eva/plugin-renderer-sprite-animation'))\nconsole.log(transform('@eva/plugin-renderer-tiling-sprite'))\nconsole.log(transform('@eva/plugin-evax'))\n")))}d.isMDXComponent=!0}}]);