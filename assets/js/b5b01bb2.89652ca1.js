"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[44310],{3905:function(e,t,n){n.d(t,{Zo:function(){return p},kt:function(){return d}});var o=n(67294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,o,a=function(e,t){if(null==e)return{};var n,o,a={},i=Object.keys(e);for(o=0;o<i.length;o++)n=i[o],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)n=i[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var s=o.createContext({}),c=function(e){var t=o.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):r(r({},t),e)),n},p=function(e){var t=c(e.components);return o.createElement(s.Provider,{value:t},e.children)},m={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},u=o.forwardRef((function(e,t){var n=e.components,a=e.mdxType,i=e.originalType,s=e.parentName,p=l(e,["components","mdxType","originalType","parentName"]),u=c(n),d=a,h=u["".concat(s,".").concat(d)]||u[d]||m[d]||i;return n?o.createElement(h,r(r({ref:t},p),{},{components:n})):o.createElement(h,r({ref:t},p))}));function d(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var i=n.length,r=new Array(i);r[0]=u;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l.mdxType="string"==typeof e?e:a,r[1]=l;for(var c=2;c<i;c++)r[c]=n[c];return o.createElement.apply(null,r)}return o.createElement.apply(null,n)}u.displayName="MDXCreateElement"},41835:function(e,t,n){n.r(t),n.d(t,{frontMatter:function(){return l},contentTitle:function(){return s},metadata:function(){return c},toc:function(){return p},default:function(){return u}});var o=n(87462),a=n(63366),i=(n(67294),n(3905)),r=["components"],l={},s="Custom component",c={unversionedId:"tutorials/customComponent",id:"tutorials/customComponent",isDocsHomePage:!1,title:"Custom component",description:"Introduce",source:"@site/docs/tutorials/customComponent.md",sourceDirName:"tutorials",slug:"/tutorials/customComponent",permalink:"/docs/tutorials/customComponent",editUrl:"https://github.com/eva-engine/eva-engine.github.io/tree/master/docs/tutorials/customComponent.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Interactive event",permalink:"/docs/tutorials/interactionEvent"},next:{title:"Sound",permalink:"/docs/tutorials/sound"}},p=[{value:"Introduce",id:"introduce",children:[{value:"for example:",id:"for-example",children:[],level:3}],level:2},{value:"Initialization",id:"initialization",children:[],level:2},{value:"Attributes",id:"attributes",children:[],level:2},{value:"Install",id:"install",children:[],level:2},{value:"life cycle",id:"life-cycle",children:[{value:"Initialization",id:"initialization-1",children:[{value:"Init",id:"init",children:[],level:4},{value:"Awake",id:"awake",children:[],level:4},{value:"Start",id:"start",children:[],level:4}],level:3},{value:"Game events",id:"game-events",children:[{value:"onPause",id:"onpause",children:[],level:4},{value:"onResume",id:"onresume",children:[],level:4}],level:3},{value:"Game loop",id:"game-loop",children:[{value:"Update",id:"update",children:[],level:4},{value:"LateUpdate",id:"lateupdate",children:[],level:4}],level:3},{value:"Disable",id:"disable",children:[{value:"Destroy",id:"destroy",children:[],level:4}],level:3}],level:2},{value:"Custom event",id:"custom-event",children:[],level:2}],m={toc:p};function u(e){var t=e.components,n=(0,a.Z)(e,r);return(0,i.kt)("wrapper",(0,o.Z)({},m,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"custom-component"},"Custom component"),(0,i.kt)("h2",{id:"introduce"},"Introduce"),(0,i.kt)("p",null,'In daily business development, we need to customize some business logic. Each game object may need a separate logic or "data driver". We develop business in the form of custom components.'),(0,i.kt)("p",null,"Demo\uff1a",(0,i.kt)("a",{parentName:"p",href:"https://eva.js.org/playground/#/component"},"https://eva.js.org/playground/#/component")),(0,i.kt)("h3",{id:"for-example"},"for example:"),(0,i.kt)("p",null,"The experience of crop production in the plants of Baba Farm will change in real time,"),(0,i.kt)("p",null,"Step1: We create a production component\nStep2: Set the speed of experience production and the attributes of current experience on the component\nStep3: Through the life cycle method, modify the experience value according to the production speed in real time, and then modify the text on the text component to display the experience value\nStep4: Provide a custom event to collect crop experience, which is called when the user clicks on the plant"),(0,i.kt)("p",null,(0,i.kt)("img",{parentName:"p",src:"https://img.alicdn.com/imgextra/i1/O1CN01wuCCfA1cXsquhQJ06_!!6000000003611-2-tps-452-492.png",alt:"image.png"})),(0,i.kt)("p",null,(0,i.kt)("img",{parentName:"p",src:"https://gw.alicdn.com/imgextra/i1/O1CN01TCaFQj1jWEkJC0TGp_!!6000000004555-2-tps-1724-958.png",alt:"image.png"})),(0,i.kt)("h2",{id:"initialization"},"Initialization"),(0,i.kt)("p",null,"Create custom components by inheriting Component"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js"},"import {Component} from '@eva/eva.js'\nclass Move extends Component {\n  static componentName ='Move' // Set the name of the component\n}\n")),(0,i.kt)("h2",{id:"attributes"},"Attributes"),(0,i.kt)("p",null,"Set properties to the component, which can be used/modified in the entire component."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js"},"class Move extends Component {\n  static componentName ='Move'\n  speed = {\n    // set properties\n    // Moving speed\n    x: 100,\n    y: 200\n  }\n}\n")),(0,i.kt)("h2",{id:"install"},"Install"),(0,i.kt)("p",null,"To use custom component."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js"},"const go = new GameObject('name')\ngo.addComponent(new Move({\n  speed: {\n    x: 100,\n    y: 100\n  }\n}))\n")),(0,i.kt)("h2",{id:"life-cycle"},"life cycle"),(0,i.kt)("p",null,(0,i.kt)("img",{parentName:"p",src:"https://gw.alicdn.com/imgextra/i1/O1CN01VCWqjG1qmuTjGuJ4y_!!6000000005539-2-tps-1422-1202.png",alt:"image.png"})),(0,i.kt)("h3",{id:"initialization-1"},"Initialization"),(0,i.kt)("h4",{id:"init"},"Init"),(0,i.kt)("p",null,"Create a custom component and implement the init method for initialization, usually by setting the parameters to the properties on the component.\nThe parameters passed in when the component is instantiated will be passed to the init method when the component is added to the game object.\nGenerally speaking, the parameters we pass in correspond to the attributes on the component.\nThis method will be executed at the time of ",(0,i.kt)("inlineCode",{parentName:"p"},"addComponent"),", even if the current component is instantiated in advance."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js"},"interface MoveParams {\n  speed: {\n    x: number,\n    y: number\n  };\n}\n\nclass Move extends Component {\n  //...\n  init(params: MoveParams) {\n    this.speed = params.speed || {x: 0, y: 0}\n  }\n}\n\n")),(0,i.kt)("h4",{id:"awake"},"Awake"),(0,i.kt)("p",null,"The game object is executed after it is installed in the game object.\nIf the game scene and all game objects are ready, you can get the nodes that are already on the game object tree.\nWe don't do this for normal coding development, but it can come in handy in editor development."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js"},"class Move extends Component {\n  // ...\n  awake() {}\n}\n")),(0,i.kt)("h4",{id:"start"},"Start"),(0,i.kt)("p",null,"Like Awake, Start is also called at the beginning of the life cycle, but it will be called before the component is updated for the first time.\nWe can bind other components to the object in the Start callback function."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js"},"class Move extends Component {\n  // ...\n  private img: Img = null\nstart() {\n  this.img = this.gameObject.getComponent(Img)\n  }\n}\n")),(0,i.kt)("h3",{id:"game-events"},"Game events"),(0,i.kt)("h4",{id:"onpause"},"onPause"),(0,i.kt)("p",null,"Execute at the time of ",(0,i.kt)("inlineCode",{parentName:"p"},"game.pause()")),(0,i.kt)("h4",{id:"onresume"},"onResume"),(0,i.kt)("p",null,"Execute at the time of ",(0,i.kt)("inlineCode",{parentName:"p"},"game.resume()")),(0,i.kt)("h3",{id:"game-loop"},"Game loop"),(0,i.kt)("h4",{id:"update"},"Update"),(0,i.kt)("p",null,"Execute every frame"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js"},"class Move extends Component {\n  // ...\n  update(e) {\n    // Let the object move at a certain speed displacement = speed * event\n    const position = this.gameObject.transform.position\n    this.gameObject.transform.position.x += this.speed.x * (e.deltaTime / 1000)\n    this.gameObject.transform.position.y += this.speed.y * (e.deltaTime / 1000)\n  }\n}\n")),(0,i.kt)("h4",{id:"lateupdate"},"LateUpdate"),(0,i.kt)("p",null,"The last execution of each frame will be executed after the update execution of all components. Some components rely on the running results of other components, such as position following. After the animation component changes the position, the following component can read the position property on the Transform component."),(0,i.kt)("h3",{id:"disable"},"Disable"),(0,i.kt)("h4",{id:"destroy"},"Destroy"),(0,i.kt)("p",null,"Called on destruction"),(0,i.kt)("h2",{id:"custom-event"},"Custom event"),(0,i.kt)("p",null,"You can perform some operations on custom events on the component. For example, in the following example, an acceleration method and a deceleration method are added."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js"},"class Move extends Component {\n  //...\n  speedUp(value = 20) {\n    this.speed.x += value\n    this.speed.y += value\n  }\n  speedDown(value = 20) {\n    this.speed.x -= value\n    this.speed.y -= value\n  }\n}\n")))}u.isMDXComponent=!0}}]);